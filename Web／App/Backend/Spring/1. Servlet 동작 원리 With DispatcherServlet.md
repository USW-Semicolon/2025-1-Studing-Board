# âœï¸ Servlet ë™ì‘ ì›ë¦¬ With DispatcherServlet

ì‘ì„±ì: https://github.com/pp8817

ë¸”ë¡œê·¸ ì‘ì„± ê¸€: https://velog.io/@pp8817/Servlet-ë™ì‘-ì›ë¦¬

# Servlet, ì™œ ì•Œì•„ì•¼ í• ê¹Œ?
Java ë°±ì—”ë“œ ê°œë°œìëŠ” ëŒ€ë¶€ë¶„ Spring Frameworkë¥¼ ì‚¬ìš©í•œë‹¤. ê·¸ì¤‘ì—ì„œë„ Spring MVC, Spring Bootë¥¼ ì‚¬ìš©í•´ ê°œë°œí•˜ëŠ”ë°, ì´ ëª¨ë“  í”„ë ˆì„ì›Œí¬ì˜ í•µì‹¬ì—ëŠ” ê³µí†µëœ ê¸°ë°˜ ê¸°ìˆ ì¸ **Servlet**ì´ ì¡´ì¬í•œë‹¤.

> ì„œë¸”ë¦¿ì€ HTTP ìš”ì²­-ì‘ë‹µ íë¦„ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ ìë°” í‘œì¤€ ì¸í„°í˜ì´ìŠ¤ì´ë‹¤.
Spring MVCì˜ `@Controller`, `@RestController`ë„ ê²°êµ­ ë‚´ë¶€ì ìœ¼ë¡œëŠ” **DispatcherServletì´ë¼ëŠ” ì„œë¸”ë¦¿** ìœ„ì—ì„œ ë™ì‘í•œë‹¤.

**ì™œ ì•Œì•„ì•¼ í• ê¹Œ?**

1. Springì˜ ë‚´ë¶€ ë™ì‘ ì›ë¦¬ë¥¼ ì´í•´í•  ìˆ˜ ìˆë‹¤.
- í•„í„°, ì¸í„°ì…‰í„°, DispatcherServlet, HandlerMapping, ViewResolver ë“± Spring MVC êµ¬ì„± ìš”ì†ŒëŠ” ì„œë¸”ë¦¿ ê¸°ë°˜ ìœ„ì—ì„œ ì‘ë™í•œë‹¤.
- Servlet íë¦„ì„ ì´í•´í•˜ì§€ ì•Šê³ , Springë§Œ ì‚¬ìš©í•˜ë©´ ë‚´ë¶€ ë™ì‘ì€ **ë¸”ë™ ë°•ìŠ¤**ê°€ ëœë‹¤.
2. ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ í•„ìš”í•œ ê²½ìš°ê°€ ì¡´ì¬í•œë‹¤.
- í•„í„° ì²´ì¸, ë¹„ë™ê¸° ì„œë¸”ë¦¿, WebSocket ì²˜ë¦¬ ë“± Springì´ ì¶”ìƒí™”í•˜ì§€ ì•Šì€ ì„œë¸”ë¦¿ APIë¥¼ ì§ì ‘ ë‹¤ë¤„ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ì¡´ì¬í•œë‹¤.
3. ì„œë¸”ë¦¿ì€ ìë°” ì›¹ì˜ í‘œì¤€ì´ë‹¤.
- í†°ìº£ ê°™ì€ ì›¹ ì„œë²„ëŠ” ëª¨ë‘ ì„œë¸”ë¦¿ ìŠ¤í™ì„ ê¸°ì¤€ìœ¼ë¡œ ì„¤ê³„ë˜ì–´ ìˆë‹¤.
- í†°ìº£ì˜ êµ¬ì¡°, ìš”ì²­ ì²˜ë¦¬ íë¦„ì„ ì´í•´í•˜ë ¤ë©´ ê²°êµ­ ì„œë¸”ë¦¿ ê°œë…ì„ ì´í•´í•´ì•¼ í•œë‹¤.

## Servletì´ë€? ê°œë…ê³¼ êµ¬ì¡° ì´í•´í•˜ê¸°
ì„œë¸”ë¦¿: Javaë¥¼ ì‚¬ìš©í•´ **ë™ì ì¸ ì›¹ í˜ì´ì§€ë¥¼ ìƒì„±**í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ì„œë²„ ì‚¬ì´ë“œ ì›¹ í”„ë¡œê·¸ë˜ë° ê¸°ìˆ 
- ì›¹ ìš”ì²­ê³¼ ì‘ë‹µì˜ íë¦„ì„ ê°„ë‹¨í•œ ë©”ì„œë“œ í˜¸ì¶œë§Œìœ¼ë¡œ ì²´ê³„ì ìœ¼ë¡œ ë‹¤ë£° ìˆ˜ ìˆê²Œ í•œë‹¤.
- í´ë¼ì´ì–¸íŠ¸ì˜ HTTP ìš”ì²­ì„ ì²˜ë¦¬í•˜ê³ , HTTP ì‘ë‹µì„ ìƒì„±í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰

> ì˜ˆë¥¼ ë“¤ë©´, ì‚¬ìš©ìê°€ ë¡œê·¸ì¸ ì‹œ ì•„ì´ë””/ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ ì„œë²„ë¡œ ì „ì†¡í•˜ë©´ ì„œë¸”ë¦¿ì€ í•´ë‹¹ ìš”ì²­ì„ ë°›ì•„ **DBì™€ ë¹„êµí•˜ì—¬ ì¸ì¦ ì²˜ë¦¬**ë¥¼ ìˆ˜í–‰í•œë‹¤. ê·¸ì— ë”°ë¥¸ ì ì ˆí•œ ì‘ë‹µì„ í´ë¼ì´ì–¸íŠ¸ì— ì „ë‹¬í•œë‹¤.

**í•µì‹¬ ê¸°ëŠ¥ê³¼ íŠ¹ì§•**
- **ì›¹ ìš”ì²­/ì‘ë‹µì˜ íë¦„ì„ ì¶”ìƒí™”í•œ APIë¥¼ ì œê³µ**í•´ì„œ HTTP í”„ë¡œí† ì½œì˜ ì²˜ë¦¬ë¥¼ ê°„ë‹¨í•œ ë©”ì„œë“œ í˜¸ì¶œë¡œ ë‹¤ë£° ìˆ˜ ìˆê²Œ í•œë‹¤.
- ì„œë¸”ë¦¿ì€ **ì›¹ ì„œë²„(ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ) ë‚´ì—ì„œ ì‹¤í–‰**ë˜ë©°, í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ì´ ì„œë²„ì— ë“¤ì–´ì˜¤ë©´ ì´ë¥¼ ê°€ë¡œì±„ì„œ ì²˜ë¦¬í•˜ê³  ì‘ë‹µì„ ë°˜í™˜í•œë‹¤.
- ì‘ë‹µ ê²°ê³¼ëŠ” HTML, JSON ë“± ë‹¤ì–‘í•œ í˜•íƒœë¡œ ìƒì„±ì´ ê°€ëŠ¥í•˜ë©° **ë™ì ì¸ ì›¹ ì½˜í…ì¸  ìƒì„±**ì˜ ê¸°ë°˜ì´ ëœë‹¤.

## ì„œë¸”ë¦¿ ìƒëª…ì£¼ê¸° (Servlet Lifecycle)
> ì„œë¸”ë¦¿ì€ ìë°” í´ë˜ìŠ¤ë¡œ ì‘ì„±ë˜ë©°, ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ(ex. í†°ìº£)ì— ì˜í•´ ê´€ë¦¬í•œë‹¤.
ì»¨í…Œì´ë„ˆëŠ” ì„œë¸”ë¦¿ì˜ ìƒì„±ë¶€í„° ìš”ì²­ ì²˜ë¦¬, ì¢…ë£Œê¹Œì§€ì˜ ì „ì²´ ê³¼ì •ì„ ìë™ìœ¼ë¡œ ê´€ë¦¬í•œë‹¤. ì´ë¥¼ ì„œë¸”ë¦¿ì˜ ìƒëª…ì£¼ê¸°ë¼ê³  ë¶€ë¥¸ë‹¤.

**ì„œë¸”ë¦¿ ìƒëª…ì£¼ê¸° ë©”ì„œë“œ**
- ìƒëª…ì£¼ê¸°ì˜ ê° ë‹¨ê³„ì—ì„œ í˜¸ì¶œë˜ëŠ” ë©”ì„œë“œ

![](https://velog.velcdn.com/images/pp8817/post/47634c8c-e326-49d3-b1cf-fc109d8b04a4/image.png)


**ìƒëª…ì£¼ê¸° íë¦„**

1. ì´ˆê¸°í™”(init):
   í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì´ ì²˜ìŒ ë“¤ì–´ì˜¤ë©´, ì»¨í…Œì´ë„ˆëŠ” í•´ë‹¹ ìš”ì²­ì„ ì²˜ë¦¬í•  ì„œë¸”ë¦¿ì´ ë©”ëª¨ë¦¬ì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸í•œë‹¤. ì—†ë‹¤ë©´, ì„œë¸”ë¦¿ ê°ì²´ë¥¼ ìƒì„±í•œ ë’¤ `init()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ì—¬ í•œ ë²ˆë§Œ ì´ˆê¸°í™” ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.
- `init()`ì€ **ì„œë¸”ë¦¿ë‹¹ 1ë²ˆë§Œ í˜¸ì¶œ**ëœë‹¤.
- ì£¼ì˜: ì„œë¸”ë¦¿ `load-on-startup` ì„¤ì •ì— ë”°ë¼ ì´ˆê¸°í™” ì‹œì ì´ ë‹¬ë¼ì§„ë‹¤..
    - ê¸°ë³¸ê°’ì€ **ìµœì´ˆ ìš”ì²­ ì‹œì ì— ì´ˆê¸°í™”**
    - `load-on-startup` ê°’ì„ ì„¤ì •í•˜ë©´ **ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë  ë•Œ ì¦‰ì‹œ ì´ˆê¸°í™”**

2. ìš”ì²­ ì²˜ë¦¬ (service -> doGet/doPost):
   `init()` ì´í›„ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ `service()` ë©”ì„œë“œê°€ ì‹¤í–‰ëœë‹¤.
   `service()` ë©”ì„œë“œëŠ” HTTP ìš”ì²­ ë°©ì‹(GET, POST ë“±)ì— ë”°ë¼ doGet() or doPost()ë¡œ ë‚˜ë‰œë‹¤.
- ì´ë•Œ, ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” ìš”ì²­ ì •ë³´ë¥¼ ë‹´ì€ **HttpServletRequest**, ì‘ë‹µ ì¶œë ¥ì„ ìœ„í•œ **HttpServletResponse** ê°ì²´ë¥¼ ìƒì„±í•˜ì—¬ ì„œë¸”ë¦¿ì— ì „ë‹¬í•œë‹¤.
    - ë‘ ê°ì²´ëŠ” **ìš”ì²­ì´ ì²˜ë¦¬ë˜ëŠ” ë™ì•ˆì—ë§Œ ìœ íš¨**í•˜ë©°, ìš”ì²­ ì²˜ë¦¬ê°€ ëë‚˜ë©´ ì»¨í…Œì´ë„ˆê°€ ìë™ìœ¼ë¡œ ì†Œë©¸ì‹œí‚¨ë‹¤.
    - ë§¤ ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œìš´ ê°ì²´ê°€ ìƒì„±ë˜ë¯€ë¡œ, **ìŠ¤ë ˆë“œ ê°„ ê³µìœ ëŠ” ë¶ˆê°€ëŠ¥**í•˜ë©° ë°˜ë“œì‹œ **ë©”ì„œë“œ ë‚´ ì§€ì—­ ë³€ìˆ˜ë¡œ ì‚¬ìš©**í•´ì•¼ í•œë‹¤.

3. ì¢…ë£Œ ì²˜ë¦¬ (destroy):
   ì„œë²„ê°€ ì¢…ë£Œë˜ê±°ë‚˜ ì„œë¸”ë¦¿ì´ ë©”ëª¨ë¦¬ì—ì„œ ì–¸ë¡œë“œë  ê²½ìš° `destroy()` ë©”ì„œë“œê°€ í˜¸ì¶œëœë‹¤.
   `destroy()`ë„ **í•œ ë²ˆë§Œ í˜¸ì¶œ**ë˜ë©°, ë¦¬ì†ŒìŠ¤ ì •ë¦¬ë‚˜ ë¡œê·¸ ì €ì¥ ë“± ì¢…ë£Œ ì‘ì—…ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë‹¤.

ì„œë¸”ë¦¿ì€ ê¸°ë³¸ì ìœ¼ë¡œ ì‹±ê¸€í†¤ìœ¼ë¡œ ê´€ë¦¬ëœë‹¤.
ë”°ë¼ì„œ `init()`, `destroy()`ëŠ” í•œ ë²ˆì”©ë§Œ í˜¸ì¶œë˜ê³ `doGet()`, `doPost()`ëŠ” ë§¤ ìš”ì²­ë§ˆë‹¤ í˜¸ì¶œëœë‹¤.

> ìš”ì²­ë§ˆë‹¤ ìƒì„±ë˜ëŠ” HttpServletRequest, HttpServlerResponse ê°ì²´ëŠ” ìš”ì²­ ì²˜ë¦¬ í›„ ì»¨í…Œì´ë„ˆì— ì˜í•´ **ìë™ìœ¼ë¡œ ì •ë¦¬**ëœë‹¤.


## ì„œë¸”ë¦¿ ë§¤í•‘ê³¼ URL ì²˜ë¦¬ ë°©ì‹: ê¸°ë³¸ íë¦„
![](https://velog.velcdn.com/images/pp8817/post/e2394bde-8e92-4168-b584-0f7d9b4da5ea/image.png)

1. ì‚¬ìš©ìê°€ ì›¹ ë¸Œë¼ìš°ì €ì— **URLì„ ì…ë ¥í•˜ê±°ë‚˜ ë§í¬ë¥¼ í´ë¦­**í•˜ë©´, í•´ë‹¹ ìš”ì²­ì€ HTTP Request í˜•íƒœë¡œ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆë¡œ ì „ë‹¬
2. ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” ìš”ì²­ì„ ë°›ìœ¼ë©´ HttpServletRequest, HttpServletResponse ê°ì²´ë¥¼ ìƒì„±
- ì´ ê°ì²´ë“¤ì€ ìš”ì²­ ì •ë³´ë¥¼ ë‹´ê³  ìˆìœ¼ë©°, ì„œë¸”ë¦¿ì— ì „ë‹¬ë˜ì–´ ìš”ì²­ ì²˜ë¦¬ì— ì‚¬ìš©ëœë‹¤.
3. ì»¨í…Œì´ë„ˆëŠ” **web.xml ì„¤ì • ë˜ëŠ” @WebServlet** ì–´ë…¸í…Œì´ì…˜ì„ ê¸°ì¤€ìœ¼ë¡œ, ìš”ì²­ëœ URL íŒ¨í„´ì´ ì–´ë–¤ ì„œë¸”ë¦¿ê³¼ ë§¤í•‘ë˜ëŠ”ì§€ í™•ì¸
4. ë§¤í•‘ëœ ì„œë¸”ë¦¿ì´ ìˆìœ¼ë©´, ì»¨í…Œì´ë„ˆëŠ” í•´ë‹¹ ì„œë¸”ë¦¿ì˜ `service()` ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê³ , **HTTP ë©”ì„œë“œ (GET, POST ë“±)**ì— ë”°ë¼ doGet(), doPost() ë©”ì„œë“œë¡œ ë¶„ê¸°ëœë‹¤.
5. doGet(), doPost()ì—ì„œ ìš”ì²­ì— ëŒ€í•œ ë¡œì§ì„ ì²˜ë¦¬í•˜ê³  ê²°ê³¼ ë°ì´í„°ë¥¼ HttpServletResponse ê°ì²´ë¥¼ í†µí•´ ì‘ë‹µìœ¼ë¡œ ì „ì†¡í•œë‹¤.
6. ì‘ë‹µì´ ì™„ë£Œë˜ë©´, ìš”ì²­ ì²˜ë¦¬ì— ì‚¬ìš©ëœ HttpServletRequest, HttpServletResponse ê°ì²´ëŠ” ì†Œë©¸ëœë‹¤.

> **ìš”ì•½**
>
>ì‚¬ìš©ìì˜ HTTP ìš”ì²­ì€ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì— ì˜í•´ `URL ë©”í•‘ -> ì„œë¸”ë¦¿ ì‹¤í–‰ -> ì‘ë‹µ ì²˜ë¦¬`ì˜ íë¦„ìœ¼ë¡œ ì´ì–´ì§€ë©°, ì´ ê³¼ì •ì€ ìš”ì²­ë§ˆë‹¤ ìƒˆë¡œìš´ HttpServletRequest/HttpServletResponse ê°ì²´ê°€ ìƒì„±ë˜ì–´ ì²˜ë¦¬ëœë‹¤.

## ì„œë¸”ë¦¿ ë§¤í•‘ê³¼ URL ì²˜ë¦¬ ë°©ì‹: ì‹¤ì œ í†°ìº£ ë‚´ë¶€ ë™ì‘ ê¸°ë°˜

**ì‹¤ì œ ë‚´ë¶€ ë™ì‘ ê¸°ë°˜ ì„¤ëª…**

1. ì‚¬ìš©ì ìš”ì²­ ë°œìƒ
```http
GET http://localhost:8080/login
```
- í•´ë‹¹ ìš”ì²­ì€ OS -> ë„¤íŠ¸ì›Œí¬ ìŠ¤íƒì„ ê±°ì³ í†°ìº£ ì„œë²„ì˜ 8080 í¬íŠ¸ë¡œ ì „ë‹¬

2. í†°ìº£ì´ ìš”ì²­ì„ ìˆ˜ì‹ 
- HTTP Connectorê°€ 8080 í¬íŠ¸ì—ì„œ ìš”ì²­ì„ ìˆ˜ì‹ 
- Request ê°ì²´(RequestFacade)ì™€ Response ê°ì²´(ResponseFacade)ë¥¼ ìƒì„±
- ì´ ê°ì²´ë“¤ì€ ê°ê° HttpServletRequest, HttpServletResponse ì¸í„°í˜ì´ìŠ¤ì˜ êµ¬í˜„ì²´ì´ë©°, ì„œë¸”ë¦¿ì— ì „ë‹¬ë˜ê¸° ì „ ë‚´ë¶€ì ìœ¼ë¡œ ì„¤ì •

3. ì„œë¸”ë¦¿ ê°ì²´ ë¡œë”© & ì´ˆê¸°í™”
- í•´ë‹¹ ì„œë¸”ë¦¿ì´ ìµœì´ˆ ìš”ì²­ì´ë¼ë©´ ë‹¤ìŒ ìˆœì„œë¡œ ì‹¤í–‰
```java
//ì„œë¸”ë¦¿ ê°ì²´ê°€ ì—†ë‹¤ë©´ newInstance()
Servlet servlet = new LoginServlet();

//init() í˜¸ì¶œ
servlet.init()
```
- ì´í›„ ì„œë¸”ë¦¿ ì¸ìŠ¤í„´ìŠ¤ëŠ” ì‹±ê¸€í†¤ìœ¼ë¡œ ë©”ëª¨ë¦¬ì— ìœ ì§€

4. ìš”ì²­ ì²˜ë¦¬ ë‹¨ê³„
```java
servlet.service(request, response);

-------

// service ë©”ì„œë“œ ë‚´ë¶€ ë™ì‘
public void service(HttpServletRequest req, HttpServletResponse resp)
    throws ServletException, IOException {
    
    String method = req.getMethod(); // GET or POST

    if (method.equals("GET")) {
        doGet(req, resp);
    } else if (method.equals("POST")) {
        doPost(req, resp);
    }
}
```
- `doGet()` ë˜ëŠ” `doPost()`ì—ì„œëŠ” ìš”ì²­ì— ë”°ë¥¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì„ ìˆ˜í–‰í•˜ê³ , `response.getWriter().write(...)` ë“±ì„ í†µí•´ HTML, JSON ë“±ì˜ ì‘ë‹µ ë°ì´í„°ë¥¼ ì‘ì„±í•œë‹¤.

5. ì‘ë‹µ í›„ ì •ë¦¬
- ì‘ë‹µì´ ì™„ë£Œë˜ë©´ í†°ìº£ì€ ë‚´ë¶€ì ìœ¼ë¡œ Request, Response ê°ì²´ì˜ ì—°ê²°ì„ í•´ì œí•˜ê³ , ê°€ë¹„ì§€ ì»¬ë ‰ì…˜ ëŒ€ìƒì´ ë˜ë„ë¡ ì²˜ë¦¬ í›„ ì†Œë©¸

**ì „ì²´ íë¦„ ìš”ì•½**
```plaintext
[ë¸Œë¼ìš°ì €] 
    â†“ ìš”ì²­
[Coyote HTTP Connector] 
    â†“
[Engine â†’ Host â†’ Context] 
    â†“
[URL ë§¤í•‘: Wrapper ì„ íƒ (Servlet ë§¤í•‘)]
    â†“
[ì„œë¸”ë¦¿ service() ì‹¤í–‰]
    â†“
[doGet()/doPost() â†’ ì‘ë‹µ ìƒì„±]
    â†“
[Response ì „ì†¡ â†’ ê°ì²´ ì •ë¦¬]
```



## DispatcherServlet: Spring MVCì™€ ì„œë¸”ë¦¿ì˜ ì—°ê²°ê³ ë¦¬
Spring MVCëŠ” ë‹¨ìˆœíˆ `@Controller`ë¥¼ ì‚¬ìš©í•˜ëŠ” ì¶”ìƒí™”ëœ í”„ë ˆì„ì›Œí¬ì²˜ëŸ¼ ë³´ì´ì§€ë§Œ, í•µì‹¬ì—ëŠ” **DispatcherServlet**ì´ ì¡´ì¬í•œë‹¤.

Springì€ `web.xml` í˜¹ì€ Java Configë¥¼ í†µí•´ DispatcherServletì„ ì„œë¸”ë¦¿ìœ¼ë¡œ ë“±ë¡í•˜ê³ , ì´ ì„œë¸”ë¦¿ì´ ëª¨ë“  HTTP ìš”ì²­ì„ ë°›ì•„ì„œ

`í•¸ë“¤ëŸ¬ ë§¤í•‘ -> ì¸í„°ì…‰í„° -> ì»¨íŠ¸ë¡¤ëŸ¬ -> ë·° ì²˜ë¦¬`ë¡œ ì´ì–´ì§€ëŠ” ì „ì²´ ìš”ì²­ íë¦„ì„ ë‹´ë‹¹í•œë‹¤.

Spring MVCì—ì„œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì‹¤ì œë¡œ ë°›ì•„ ì²˜ë¦¬í•˜ëŠ” í•µì‹¬ ì»´í¬ë„ŒíŠ¸ëŠ” ë°”ë¡œ DispatcherServletì´ë‹¤.

DispatcherServletì€ Springì´ ì œê³µí•˜ëŠ” íŠ¹ìˆ˜í•œ ì„œë¸”ë¦¿ìœ¼ë¡œ, **ëª¨ë“  ìš”ì²­ì„ ì¤‘ì•™ì—ì„œ ë°›ì•„ ë¶„ê¸°í•˜ê³  íë¦„ì„ ì œì–´í•˜ëŠ” ì—­í• **ì„ í•œë‹¤.

> DispatcherServlet = ìš”ì²­ì˜ ì§„ì…ì ì´ì ì „ì²´ íë¦„ì˜ ì¡°ìœ¨ì

**DispatcherServeltì˜ ë™ì‘ íë¦„**
```plaintext
[ìš”ì²­]
   â†“
DispatcherServlet
   â†“
HandlerMapping (ì–´ë–¤ Controllerì¸ì§€ ì°¾ê¸°)
   â†“
HandlerAdapter (ì–´ë–»ê²Œ í˜¸ì¶œí• ì§€ ê²°ì •)
   â†“
Controller (@Controller í´ë˜ìŠ¤ì˜ ë©”ì„œë“œ ì‹¤í–‰)
   â†“
ModelAndView ìƒì„±
   â†“
ViewResolver (ì–´ë–¤ ë·°ë¥¼ ë Œë”ë§í• ì§€ ì°¾ê¸°)
   â†“
View (JSP, Thymeleaf ë“± ë Œë”ë§)
   â†“
[ì‘ë‹µ]
```

**ì„œë¸”ë¦¿ê³¼ DispatcherServlet ë¹„êµ**

| êµ¬ë¶„            | ì„œë¸”ë¦¿ (Servlet)                                  | DispatcherServlet (Spring MVC)                                  |
|-----------------|----------------------------------------------------|------------------------------------------------------------------|
| ìš”ì²­ ìˆ˜ì‹        | ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆê°€ ì§ì ‘ ìš”ì²­ ì²˜ë¦¬                   | ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆëŠ” DispatcherServletì— ìš”ì²­ ì „ë‹¬                 |
| ë§¤í•‘ ë°©ì‹       | `web.xml` ë˜ëŠ” `@WebServlet`                       | `web.xml`, `@Configuration`, `WebApplicationInitializer` ë“±     |
| ìš”ì²­ ì²˜ë¦¬       | `service()` â†’ `doGet()` / `doPost()`              | `doDispatch()` â†’ Controller ë©”ì„œë“œ í˜¸ì¶œ                         |
| íŒŒë¼ë¯¸í„° ì²˜ë¦¬   | `request.getParameter()` ì§ì ‘ í˜¸ì¶œ                | `@RequestParam`, `@RequestBody` ë“±ìœ¼ë¡œ ìë™ ë°”ì¸ë”©             |
| ì‘ë‹µ ì²˜ë¦¬       | `response.getWriter().write(...)` ì§ì ‘ ì‘ì„±       | `ModelAndView`, `ResponseEntity`, ViewResolver ë“±ìœ¼ë¡œ ì²˜ë¦¬     |
| í™•ì¥ì„±          | êµ¬ì¡°ê°€ ë‹¨ìˆœí•˜ë‚˜ ìˆ˜ë™ìœ¼ë¡œ êµ¬í˜„í•´ì•¼ í•¨               | ì¸í„°ì…‰í„°, ì˜ˆì™¸ ì²˜ë¦¬, ì–´ëŒ‘í„° ë“± ë‹¤ì–‘í•œ ì»´í¬ë„ŒíŠ¸ë¡œ ìœ ì—°í•˜ê²Œ í™•ì¥ |

**DispatcherServlet ë‚´ë¶€ ë™ì‘**
DispatcherServletì€ HttpServletì„ ìƒì†í•œ **ì„œë¸”ë¦¿ ê·¸ ìì²´**ì´ë‹¤.
```java
/* DispatcherServlet */
public class DispatcherServlet extends FrameworkServlet {
    @Override
    protected void doService(HttpServletRequest request, HttpServletResponse response) {
        doDispatch(request, response);
    }
}

---

/* DoDispatch() ë‚´ë¶€ ì‘ì—… */
// ìš”ì²­ì„ ì²˜ë¦¬í•  í•¸ë“¤ëŸ¬ ì°¾ê¸°
HandlerExecutionChain handler = getHandler(request);

// í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° ê²°ì •
HandlerAdapter adapter = getHandlerAdapter(handler.getHandler());

// ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œ í˜¸ì¶œ
ModelAndView mv = adapter.handle(request, response, handler.getHandler());

// ë·° ì´ë¦„ â†’ ViewResolver í†µí•´ View ê°ì²´ë¡œ ë³€í™˜
View view = resolveViewName(mv.getViewName());

// View ë Œë”ë§
view.render(mv.getModel(), request, response);
```
Springì€ ì„œë¸”ë¦¿ì˜ ê¸°ë³¸ êµ¬ì¡°ëŠ” ìœ ì§€í•˜ë©´ì„œ, ê·¸ ìœ„ì— ì»´í¬ë„ŒíŠ¸ë¥¼ ì¸µìœ¼ë¡œ ìŒ“ì•„ ì¶”ìƒí™”í•˜ê³  í™•ì¥í•œ êµ¬ì¡°ì´ë‹¤.

**DispatcherServlet ë“±ë¡ ë°©ì‹: Spring Boot**
```java
@Configuration
public class WebConfig {
    @Bean
    public DispatcherServlet dispatcherServlet() {
        return new DispatcherServlet();
    }
}
```
Spring Bootì—ì„œëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ê²½ë¡œì— DispatcherServletì´ ë“±ë¡ë˜ì–´ ìˆì–´ì„œ **ëª¨ë“  ìš”ì²­ì´ DispatcherServletì„ ê±°ì³ ë“¤ì–´ì˜¤ë„ë¡ ì„¤ì •**ë˜ì–´ ìˆë‹¤.

DispatcherServlet ì—­ì‹œ ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆì¸ **í†°ìº£ ìœ„ì—ì„œ ë™ì‘**í•˜ë©°, í†°ìº£ì€ ìš”ì²­ì„ ìˆ˜ì‹ í•˜ê³  ì„œë¸”ë¦¿ì„ ì‹¤í–‰í•˜ëŠ” ê¸°ë°˜ í™˜ê²½ì„ ì œê³µí•œë‹¤.

> âœ…**ì •ë¦¬**
>
> DispatcherServletì€ ì„œë¸”ë¦¿ ìœ„ì— êµ¬ì¶•ëœ **Spring MVC ì•„í‚¤í…ì²˜ì˜ ì¤‘ì‹¬ì¶•**ì´ë‹¤.
> ì„œë¸”ë¦¿ ìƒëª…ì£¼ê¸°ì™€ ë§¤í•‘ êµ¬ì¡°ë¥¼ ê·¸ëŒ€ë¡œ ë”°ë¥´ë©´ì„œ,
> ìš”ì²­ ì²˜ë¦¬ íë¦„ì„ ë¶„ë¦¬í•˜ê³  í™•ì¥í•  ìˆ˜ ìˆëŠ” **í•µì‹¬ ì»´í¬ë„ŒíŠ¸ ì²´ê³„**ë¥¼ ì œê³µí•œë‹¤.

## ì‹¤ì œ íë¦„ ì •ë¦¬
ì§€ê¸ˆê¹Œì§€ ì•Œì•„ë³¸ í•µì‹¬ êµ¬ì¡°
- Serlvetì´ë€ ë¬´ì—‡ì´ë©° ì–´ë–»ê²Œ ì‘ë™í•˜ëŠ”ê°€
- DispatcherServletì´ Spring MVCì—ì„œ ì–´ë–¤ ì—­í• ì„ ìˆ˜í–‰í•˜ëŠ”ê°€
- ì„œë¸”ë¦¿ ìƒëª…ì£¼ê¸°ì™€ ìš”ì²­ ì²˜ë¦¬ íë¦„
- ìš”ì²­ -> ì»¨íŠ¸ë¡¤ëŸ¬ -> ì‘ë‹µê¹Œì§€ì˜ ì „ì²´ í”„ë¡œì„¸ìŠ¤

ì´ íë¦„ì„ **í•˜ë‚˜ì˜ ì‹œí€€ìŠ¤**ë¡œ í†µí•©í•´ë³´ì

**ì „ì²´ ìš”ì²­ ì²˜ë¦¬ íë¦„**
```plaintext
[ì‚¬ìš©ì (ë¸Œë¼ìš°ì €)]
    â†“ HTTP ìš”ì²­ (GET /login)
[TCP/IP, ë„¤íŠ¸ì›Œí¬ ìŠ¤íƒ]
    â†“
[ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ (í†°ìº£)]
    â†“
[DispatcherServlet (Spring)]
    â†“
[HandlerMapping] â†’ í•´ë‹¹ ì»¨íŠ¸ë¡¤ëŸ¬ ì°¾ê¸°
    â†“
[HandlerAdapter] â†’ í˜¸ì¶œ ë°©ë²• ê²°ì •
    â†“
[@Controller ë©”ì„œë“œ ì‹¤í–‰]
    â†“
[ModelAndView or @ResponseBody ì‘ë‹µ ìƒì„±]
    â†“
[ViewResolver â†’ View ë Œë”ë§]
    â†“
[HttpServletResponseì— ì‘ë‹µ ì‘ì„±]
    â†“
[ì‚¬ìš©ìì—ê²Œ HTTP ì‘ë‹µ ë°˜í™˜]
```

**ì‹¤ì œ ì½”ë“œ íë¦„**
```java
// DispatcherServlet â†’ doDispatch()
HandlerExecutionChain handler = getHandler(request); // ìš”ì²­ì„ ì²˜ë¦¬í•  í•¸ë“¤ëŸ¬ ì°¾ê¸°
HandlerAdapter adapter = getHandlerAdapter(handler.getHandler()); // í•¸ë“¤ëŸ¬ ì–´ëŒ‘í„° í˜¸ì¶œ
ModelAndView mv = adapter.handle(request, response, handler.getHandler()); // ì‹¤í–‰
View view = resolveViewName(mv.getViewName()); // ë·° ì°¾ê¸°
view.render(mv.getModel(), request, response); // ë Œë”ë§
```

> âœ…**ì •ë¦¬**
>
>ì§€ê¸ˆê¹Œì§€ ë‚´ìš©ì„ í†µí•´
`HTTP ìš”ì²­ -> DIspatcherServlet -> í•¸ë“¤ëŸ¬ ì‹¤í–‰ -> ì‘ë‹µ ì „ì†¡`ì— ì´ë¥´ëŠ”
ì „ì²´ Spring MVC ìš”ì²­ íë¦„ì„ êµ¬ì¡°ì ìœ¼ë¡œ ì´í•´í–ˆë‹¤.



## ğŸ ë§ˆë¬´ë¦¬: ì™œ ì„œë¸”ë¦¿ì„ ì•Œì•„ì•¼ í–ˆëŠ”ê°€?
Spring MVCëŠ” ë§¤ìš° ì˜ ì¶”ìƒí™”ëœ í”„ë ˆì„ì›Œí¬ë‹¤.

ë•ë¶„ì— `@Controller`, `@RestController`, `@Component` ê°™ì€ ì–´ë…¸í…Œì´ì…˜ë§Œìœ¼ë¡œë„ ì‰½ê²Œ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ë§Œë“¤ ìˆ˜ ìˆë‹¤.

í•˜ì§€ë§Œ í¸ë¦¬í•¨ì˜ ì´ë©´ì—ëŠ” ë³µì¡í•œ êµ¬ì¡°ì™€ íë¦„ì´ ì¡´ì¬í•˜ê³ , ê·¸ ì¤‘ì‹¬ì—ëŠ” **ì„œë¸”ë¦¿ê³¼ DispatcherServlet**ì´ ì¡´ì¬í•œë‹¤.

> **ì´ë²ˆ ì •ë¦¬ë¥¼ í†µí•´ ì–»ì€ í•µì‹¬ ì¸ì‚¬ì´íŠ¸**
>
>- ì„œë¸”ë¦¿ì€ ìë°” ì›¹ ê¸°ìˆ ì˜ ì‹œì‘ì ì´ì, ëª¨ë“  ì›¹ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” í‘œì¤€ ì»´í¬ë„ŒíŠ¸ì´ë‹¤.
>- **DispatcherServletì€** Springì´ ì œê³µí•˜ëŠ” ì„œë¸”ë¦¿ í™•ì¥ì²´ë¡œ, ìš”ì²­ì„ ë°›ê³  ì²˜ë¦¬ íë¦„ì„ ì¡°ìœ¨í•˜ëŠ” ì¤‘ì‹¬ì¶•ì´ë‹¤.
>- Springì˜ ëª¨ë“  ìš”ì²­ ì²˜ë¦¬ ê³¼ì •ì€ ê²°êµ­ **ì„œë¸”ë¦¿ ì»¨í…Œì´ë„ˆ ìœ„ì—ì„œ ë™ì‘**í•˜ë©°, ë‚´ë¶€ì ìœ¼ë¡œëŠ” ì„œë¸”ë¦¿ ìƒëª…ì£¼ê¸°ì™€ URL ë§¤í•‘, HTTP ìš”ì²­/ì‘ë‹µ ì²˜ë¦¬ ë¡œì§ì´ ë…¹ì•„ ìˆë‹¤.




---
**ì¶œì²˜**

https://docs.oracle.com/javaee/6/tutorial/doc/bnafd.html
https://www.oracle.com/java/technologies/java-servlet-tec.html
https://docs.spring.io/spring-framework/reference/web/webmvc/mvc-servlet.html